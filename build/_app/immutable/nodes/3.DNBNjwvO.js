import{q as H,r as B,E as te,v as ne,w as ce,x as q,y as le,k as $,z as de,A as z,B as X,C as ve,D as F,F as j,G as fe,H as ie,I as W,J as ee,m as me,i as se,K as g,c as O,s as i,f as Y,l as J,o as M,a as A,n as Q,t as P}from"../chunks/disclose-version.D-iys4Dd.js";import{d as K,i as _e,n as he,b as be,e as pe,f as re,E as ge,h as ke,j as Te,S as xe,p as oe,a as ue,k as D}from"../chunks/runtime.DXWQE5jP.js";import{H as Ae}from"../chunks/Header.h5u_bs6y.js";import{S as G,d as Ve}from"../chunks/strudel.s-9GhkZR.js";import{o as ye}from"../chunks/main-client.DyTc0z34.js";function Ce(a,n){return{a:n,d:null,f:a,v:[],e:null,p:re,r:null,s:[],t:ge}}function Ee(a,n,s){return{a:null,d:null,e:null,i:n,k:s,v:a,p:re,r:null,s:null,t:ke}}function we(a,n,s,d,c,h,t){const m=(s&z)!==0,l=Ce(s,a);let x=null;de(a,m);let k,w=null,o=null,V=!1;l.r=v=>{const f=x,b=f.s;b.add(v),v.f(()=>{b.delete(v),b.size===0&&f.e!==null&&(f.d!==null&&(H(f.d),f.d=null),K(f.e),f.e=null)})};const p=()=>{const v={d:null,e:null,s:new Set,p:x},f=B(()=>{const b=l.d;b!==null&&(H(b),l.d=null);let T=l.a;(l.f&z)!==0&&(X?T=T.firstChild:(T=ve(),l.a.appendChild(T))),h(T),v.d=l.d,l.d=null},l,!0);v.e=f,x=v},y=v=>{const f=v.f,b=(f&z)!==0,T=v.a;t(k,v,T,b,c,f,!0,w)},I=B(()=>{var b,T;const v=n();k=_e(v)?v:v==null?[]:Array.from(v),d!==null?w=k.map(d):s&te||k.map(he);const f=k.length;if(X){const C=((T=(b=F)==null?void 0:b[0])==null?void 0:T.data)==="ssr:each_else";C&&f||!C&&!f?(H(F),j(null),V=!0):C&&F.shift()}if(h!==null){if(f===0){if(l.v.length!==0||o===null){y(l),p();return}}else if(l.v.length===0&&x!==null){const C=x,L=C.s;L.size===0?C.d!==null&&(H(C.d),C.d=null):ne(L,"out")}}o!==null&&pe(o)},l,!1);o=B(y,l,!0),V&&j([]),be(I,()=>{const v=l.f,f=l.a,b=(v&z)!==0;let T=x;for(;T!==null;){const C=T.d;C!==null&&H(C);const L=T.e;L!==null&&K(L),T=T.p}t([],l,f,b,c,v,!1,w),K(o)}),l.e=I}function U(a,n,s,d,c){we(a,n,s,null,d,c,Se)}function Se(a,n,s,d,c,h,t){h&W&&!Te(a)&&!(xe in a)&&(h^=W);var m=n.v,l=n.s,x=m.length,k=a.length,w=Math.max(x,k),o=0,V,p;if(l.length!==0&&Le(l),k===0)for(V=[],d&&x!==0&&ce(s);o<w;)p=m[o++],Z(p,l,t,d);else{var y;let b=!1;if(V=Array(k),X){for(var I=F,v=I[0];o<w;o++){var f=fe(v);if(j(f),!f){b=!0;break}y=a[o],p=ae(y,null,o,c,h),V[o]=p,v=f[f.length-1].nextSibling.nextSibling}Re(I,v)}for(;o<w;o++)o>=x?(y=a[o],p=ae(y,null,o,c,h),V[o]=p,Ie(p,s,d,null)):o>=k?(p=m[o],Z(p,l,t)):(y=a[o],p=m[o],V[o]=p,He(p,y,o,h));b&&j([])}n.v=V}function Re(a,n){if(n!==null){var s=a.indexOf(n);s!==-1&&a.length>s+1&&H(a.slice(s))}}function Ie(a,n,s,d){var c=a.d;return d===null?s?q(c,n,null):q(c,n.parentNode,n):q(c,null,d)}function Le(a){var n=a.length;if(n>0){for(var s=0,d,c;s<n;s++)d=a[s],c=d.r,c!==null&&(d.r=null,Z(d,null,!1));a.length=0}}function He(a,n,s,d){const c=a.v;d&le&&$(c,n);const h=a.s,t=(d&ie)!==0,m=a.a;h!==null&&d&te&&m!==null&&m(a,h),t?$(a.i,s):a.i=s}function Z(a,n,s,d=!1){const c=a.s;if(s&&c!==null){for(let t of c)t.r==="key"&&c.delete(t);if(c.size===0)a.s=null;else{ne(c,"out"),n!==null&&n.push(a);return}}const h=a.d;!d&&h!==null&&H(h),K(a.e)}function ae(a,n,s,d,c){const t=(c&le)===0?a:c&W?ee(a):me(a),m=c&ie?ee(s):s,l=Ee(t,m,n),x=B(k=>{d(null,k.v,k.i)},l,!0);return l.e=x,l}var Be=P('<div class="key top svelte-1i6nyc1"><b><p> </p><b></b></b></div>'),De=P('<div class="key top svelte-1i6nyc1"><b><p> </p><b></b></b></div>'),Ne=P('<div class="key svelte-1i6nyc1"><b><p> </p></b></div>'),Oe=P('<div><div class="piano"><div class="key-row svelte-1i6nyc1" id="black"><div class="blank svelte-1i6nyc1"></div> <!> <div class="blank gap svelte-1i6nyc1"></div> <!> <div class="blank svelte-1i6nyc1"></div></div> <div class="key-row svelte-1i6nyc1" id="white"></div></div> <div class="audioctl svelte-1i6nyc1"><button id="audiobtn"></button> <input type="checkbox" name="keyboardon" id="kbbtn"></div></div>');function Me(a,n){ue(n,!1);let s=n.ctx.destination;const d={c:0,db:1,d:2,eb:3,e:4,f:5,gb:6,g:7,ab:8,a:9,bb:10,b:11,c2:12},c=[130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63];let h={gain:0,channelCount:1,channelCountMode:"max",channelInterpretation:"speakers"},t=Array.from({length:13},(u,e)=>{let r=new GainNode(n.ctx,h);return r.connect(s),r});Array.from({length:13},(u,e)=>{let r=new OscillatorNode(n.ctx);return r.type="triangle",r.frequency.setValueAtTime(c[e],n.ctx.currentTime),r.connect(t[e]),r.start(),r}),ye(()=>{const u=document.getElementById("audiobtn");u==null||u.addEventListener("click",()=>{n.ctx.state==="suspended"&&n.ctx.resume().then(()=>{console.log(n.ctx.state)})})});const m=u=>{var _,S;u.stopPropagation();const e=u.target;let r=e.id;r||(r=(S=(_=e.parentNode)==null?void 0:_.parentElement)==null?void 0:S.id),t[d[r]].gain.linearRampToValueAtTime(0,n.ctx.currentTime+.4)},l=u=>{var _,S;u.stopPropagation();const e=u.target;let r=e.id;r||(r=(S=(_=e.parentNode)==null?void 0:_.parentElement)==null?void 0:S.id),t[d[r]].gain.linearRampToValueAtTime(.4,n.ctx.currentTime+1)},x=u=>{u.stopPropagation();let e=n.ctx.currentTime,r=new Float32Array([.01,.4]);switch(u.key){case"a":t[0].gain.setValueCurveAtTime(r,e,.4);break;case"w":t[1].gain.setValueCurveAtTime(r,e,.4);break;case"s":t[2].gain.setValueCurveAtTime(r,e,.4);break;case"e":t[3].gain.setValueCurveAtTime(r,e,.4);break;case"d":t[4].gain.setValueCurveAtTime(r,e,.4);break;case"f":t[5].gain.setValueCurveAtTime(r,e,.4);break;case"t":t[6].gain.setValueCurveAtTime(r,e,.4);break;case"g":t[7].gain.setValueCurveAtTime(r,e,.4);break;case"y":t[8].gain.setValueCurveAtTime(r,e,.4);break;case"h":t[9].gain.setValueCurveAtTime(r,e,.4);break;case"u":t[10].gain.setValueCurveAtTime(r,e,.4);break;case"j":t[11].gain.setValueCurveAtTime(r,e,.4);break;case"k":t[12].gain.setValueCurveAtTime(r,e,.4);break}console.log(u.key.toString())},k=u=>{u.stopPropagation();let e=n.ctx.currentTime;switch(u.key){case"a":t[0].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"w":t[1].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"s":t[2].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"e":t[3].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"d":t[4].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"f":t[5].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"t":t[6].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"g":t[7].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"y":t[8].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"h":t[9].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"u":t[10].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"j":t[11].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break;case"k":t[12].gain.cancelScheduledValues(e).linearRampToValueAtTime(0,e+.4);break}console.log(u.key.toString())},w=u=>{u.preventDefault(),u.currentTarget.checked?(document.addEventListener("keypress",x),document.addEventListener("keyup",k)):(document.removeEventListener("keypress",x),document.removeEventListener("keyup",k))};se();var o=M(a,!0,Oe),V=A(o),p=A(V),y=A(p),I=i(i(y,!0)),v=i(i(I,!0)),f=i(i(v,!0)),b=i(i(p,!0)),T=i(i(V,!0)),C=A(T),L=i(i(C,!0));U(I,()=>[{id:"db",text:"C# Db"},{id:"eb",text:"D# Eb"}],1,(u,e,r)=>{var _=M(u,!0,Be),S=A(_),E=A(S),N=Q(A(E)),R;B(()=>{R!==(R=D(e).id)&&Y(_,"id",R),J(N,D(e).text)}),g("mousedown",_,l,!1),g("mouseup",_,m,!1),g("mouseleave",_,m,!1),g("mousedown",E,l,!1),g("mouseup",E,m,!1),g("mouseleave",E,m,!1),O(u,_)},null),U(f,()=>[{id:"gb",text:"F# Gb"},{id:"ab",text:"G# Ab"},{id:"bb",text:"A# Bb"}],1,(u,e,r)=>{var _=M(u,!0,De),S=A(_),E=A(S),N=Q(A(E)),R;B(()=>{R!==(R=D(e).id)&&Y(_,"id",R),J(N,D(e).text)}),g("mousedown",_,l,!1),g("mouseup",_,m,!1),g("mouseleave",_,m,!1),g("mousedown",E,l,!1),g("mouseup",E,m,!1),g("mouseleave",E,m,!1),O(u,_)},null),U(b,()=>[{id:"c",text:"C"},{id:"d",text:"D"},{id:"e",text:"E"},{id:"f",text:"F"},{id:"g",text:"G"},{id:"a",text:"A"},{id:"b",text:"B"},{id:"c2",text:"C"}],9,(u,e,r)=>{var _=M(u,!0,Ne),S=A(_),E=A(S),N=Q(A(E)),R;B(()=>{R!==(R=D(e).id)&&Y(_,"id",R),J(N,D(e).text)}),g("mousepressed",_,l,!1),g("mouseup",_,m,!1),g("mouseleave",_,m,!1),g("mousedown",E,l,!1),g("mouseup",E,m,!1),g("mouseleave",E,m,!1),O(u,_)},null),g("change",L,w,!1),O(a,o),oe()}var Pe=P(`<div><!> <h3 class="pagetitle svelte-1uad18p">NOTE(  )</h3> <div class="links svelte-1uad18p"><a href="#concepts">Concepts</a> <a href="#piano">Piano note</a></div> <div class="links examples svelte-1uad18p">Examples: <a href="#note1">1</a> <a href="#note2">2</a> <a href="#note3">3</a> <a href="#note4">4</a></div> <div id="note1"><p>1.</p></div> <!> <div id="piano"><!></div> <div id="note2"><p>2.</p></div> <!> <div id="note3"><p>3.</p></div> <!> <div id="note4"><p>4.</p></div> <!> <h3>Vocabulary:</h3> <div id="concepts" class="svelte-1uad18p"><h4>Commands:</h4> <ul><li><b>note()</b> - the command we use to program melodies.</li> <li><b><a href="#note1">.slow( )</a></b> - makes the pattern go slower. <i>[ slow(2) = half the speed ]</i></li> <li><b><a href="#note1">.fast( )</a></b> - makes the pattern go faster. <i>[ fast(2) = double the speed  ]</i></li> <li><b><a href="#note3">.sound( )</a></b> - allows you to change the
      sound of the notes playing. This is the same command as last lesson, but
      it can be used in combination with <b>note( )</b>.</li></ul> <h4>Syntax:</h4> <ol class="svelte-1uad18p"><li class="svelte-1uad18p"><b><a href="#note2">~</a></b> - the rest, inserts a step in the
      pattern of silence.</li> <li class="svelte-1uad18p"><b><a href="#note4">("A4 B3 C2")</a></b> - note names and octave
      numbers</li></ol></div></div>`);function qe(a,n){ue(n,!1);const s=Ve.note,d=window.AudioContext,c=new d;se();var h=M(a,!0,Pe),t=A(h),m=i(i(t,!0)),l=i(i(m,!0)),x=i(i(l,!0)),k=i(i(x,!0)),w=i(i(k,!0)),o=i(i(w,!0)),V=A(o),p=i(i(o,!0)),y=i(i(p,!0)),I=i(i(y,!0)),v=i(i(I,!0)),f=i(i(v,!0)),b=i(i(f,!0));Ae(t,{}),G(w,{title:"note()",get url(){return s[0]}}),Me(V,{ctx:c}),G(y,{title:"note()",get url(){return s[1]}}),G(v,{title:"note()",get url(){return s[2]}}),G(b,{title:"note()",get url(){return s[3]},height:380}),O(a,h),oe()}export{qe as component};
