import{n as B,r as D,E as ne,q as ae,v as fe,w as q,x as le,j as $,y as _e,z,A as X,B as he,C as G,D as j,F as me,G as se,H as W,I as ee,m as pe,i as ie,J as g,c as M,s as l,g as Y,k as J,o as P,a as C,l as Q,t as R}from"../chunks/disclose-version.C0vqoXez.js";import{d as K,i as be,n as ge,b as xe,e as ye,f as re,E as ke,h as Ee,j as Ae,S as we,p as oe,a as ue,k as N}from"../chunks/runtime.DXWQE5jP.js";import{H as Ce}from"../chunks/Header.tepHQ9vT.js";import{S as F,d as Te}from"../chunks/strudel.C7_MkFpg.js";import{o as Se}from"../chunks/main-client.CrId5V20.js";function Ie(e,t){return{a:t,d:null,f:e,v:[],e:null,p:re,r:null,s:[],t:ke}}function Le(e,t,s){return{a:null,d:null,e:null,i:t,k:s,v:e,p:re,r:null,s:null,t:Ee}}function He(e,t,s,r,u,p,h){const A=(s&z)!==0,o=Ie(s,e);let k=null;_e(e,A);let v,E=null,c=null,T=!1;o.r=d=>{const f=k,m=f.s;m.add(d),d.f(()=>{m.delete(d),m.size===0&&f.e!==null&&(f.d!==null&&(B(f.d),f.d=null),K(f.e),f.e=null)})};const x=()=>{const d={d:null,e:null,s:new Set,p:k},f=D(()=>{const m=o.d;m!==null&&(B(m),o.d=null);let y=o.a;(o.f&z)!==0&&(X?y=y.firstChild:(y=he(),o.a.appendChild(y))),p(y),d.d=o.d,o.d=null},o,!0);d.e=f,k=d},w=d=>{const f=d.f,m=(f&z)!==0,y=d.a;h(v,d,y,m,u,f,!0,E)},H=D(()=>{var m,y;const d=t();v=be(d)?d:d==null?[]:Array.from(d),r!==null?E=v.map(r):s&ne||v.map(ge);const f=v.length;if(X){const S=((y=(m=G)==null?void 0:m[0])==null?void 0:y.data)==="ssr:each_else";S&&f||!S&&!f?(B(G),j(null),T=!0):S&&G.shift()}if(p!==null){if(f===0){if(o.v.length!==0||c===null){w(o),x();return}}else if(o.v.length===0&&k!==null){const S=k,O=S.s;O.size===0?S.d!==null&&(B(S.d),S.d=null):ae(O,"out")}}c!==null&&ye(c)},o,!1);c=D(w,o,!0),T&&j([]),xe(H,()=>{const d=o.f,f=o.a,m=(d&z)!==0;let y=k;for(;y!==null;){const S=y.d;S!==null&&B(S);const O=y.e;O!==null&&K(O),y=y.p}h([],o,f,m,u,d,!1,E),K(c)}),o.e=H}function U(e,t,s,r,u){He(e,t,s,null,r,u,Oe)}function Oe(e,t,s,r,u,p,h){p&W&&!Ae(e)&&!(we in e)&&(p^=W);var A=t.v,o=t.s,k=A.length,v=e.length,E=Math.max(k,v),c=0,T,x;if(o.length!==0&&De(o),v===0)for(T=[],r&&k!==0&&fe(s);c<E;)x=A[c++],Z(x,o,h,r);else{var w;let m=!1;if(T=Array(v),X){for(var H=G,d=H[0];c<E;c++){var f=me(d);if(j(f),!f){m=!0;break}w=e[c],x=te(w,null,c,u,p),T[c]=x,d=f[f.length-1].nextSibling.nextSibling}Ve(H,d)}for(;c<E;c++)c>=k?(w=e[c],x=te(w,null,c,u,p),T[c]=x,Be(x,s,r,null)):c>=v?(x=A[c],Z(x,o,h)):(w=e[c],x=A[c],T[c]=x,Ne(x,w,c,p));m&&j([])}t.v=T}function Ve(e,t){if(t!==null){var s=e.indexOf(t);s!==-1&&e.length>s+1&&B(e.slice(s))}}function Be(e,t,s,r){var u=e.d;return r===null?s?q(u,t,null):q(u,t.parentNode,t):q(u,null,r)}function De(e){var t=e.length;if(t>0){for(var s=0,r,u;s<t;s++)r=e[s],u=r.r,u!==null&&(r.r=null,Z(r,null,!1));e.length=0}}function Ne(e,t,s,r){const u=e.v;r&le&&$(u,t);const p=e.s,h=(r&se)!==0,A=e.a;p!==null&&r&ne&&A!==null&&A(e,p),h?$(e.i,s):e.i=s}function Z(e,t,s,r=!1){const u=e.s;if(s&&u!==null){for(let h of u)h.r==="key"&&u.delete(h);if(u.size===0)e.s=null;else{ae(u,"out"),t!==null&&t.push(e);return}}const p=e.d;!r&&p!==null&&B(p),K(e.e)}function te(e,t,s,r,u){const h=(u&le)===0?e:u&W?ee(e):pe(e),A=u&se?ee(s):s,o=Le(h,A,t),k=D(v=>{r(null,v.v,v.i)},o,!0);return o.e=k,o}var Me=R('<div class="key top svelte-1i6nyc1"><b><p> </p><b></b></b></div>'),Pe=R('<div class="key top svelte-1i6nyc1"><b><p> </p><b></b></b></div>'),Re=R('<div class="key svelte-1i6nyc1"><b><p> </p></b></div>'),ze=R('<div><div class="piano"><div class="key-row svelte-1i6nyc1" id="black"><div class="blank svelte-1i6nyc1"></div> <!> <div class="blank gap svelte-1i6nyc1"></div> <!> <div class="blank svelte-1i6nyc1"></div></div> <div class="key-row svelte-1i6nyc1" id="white"></div></div> <div class="audioctl svelte-1i6nyc1"><button id="audiobtn"></button> <input type="checkbox" name="keyboardon" id="kbbtn"></div></div>');function Fe(e,t){ue(t,!1);let s=t.ctx.destination,r=Array.from({length:13},(n,a)=>!1);const u={c:0,db:1,d:2,eb:3,e:4,f:5,gb:6,g:7,ab:8,a:9,bb:10,b:11,c2:12},p=[130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63];let h=Array.from({length:13},(n,a)=>{let _={gain:0,channelCount:1,channelCountMode:"max",channelInterpretation:"speakers"},i=new GainNode(t.ctx,_);return i.connect(s),i});Array.from({length:13},(n,a)=>{let _=new OscillatorNode(t.ctx);return _.type="triangle",_.frequency.setValueAtTime(p[a],t.ctx.currentTime),_.connect(h[a]),_.start(),_}),Se(()=>{const n=document.getElementById("audiobtn");n==null||n.addEventListener("click",()=>{t.ctx.state==="suspended"&&t.ctx.resume().then(()=>{console.log(t.ctx.state)})})});const A=n=>{switch(n){case"a":return 0;case"w":return 1;case"s":return 2;case"e":return 3;case"d":return 4;case"f":return 5;case"t":return 6;case"g":return 7;case"y":return 8;case"h":return 9;case"u":return 10;case"j":return 11;case"k":return 12;default:return-1}},o=(n,a,_)=>{n.gain.cancelScheduledValues(a),n.gain.linearRampToValueAtTime(0,a+_)},k=(n,a,_,i)=>{n.gain.cancelScheduledValues(a),n.gain.setValueCurveAtTime(_,a,i)},v=n=>{var I,b;n.stopPropagation();const a=n.target;let _=a.id;_||(_=(b=(I=a.parentNode)==null?void 0:I.parentElement)==null?void 0:b.id);let i=u[_];i>=0&&(r[i]=!1,o(h[i],t.ctx.currentTime,.4))},E=n=>{var I,b;n.stopPropagation();const a=n.target;let _=a.id;_||(_=(b=(I=a.parentNode)==null?void 0:I.parentElement)==null?void 0:b.id);let i=u[_];if(i>=0){let V=new Float32Array([.01,.4]);r[i]=!0,k(h[i],t.ctx.currentTime,V,.1),h[i].gain.linearRampToValueAtTime(.4,t.ctx.currentTime+1)}},c=n=>{n.stopPropagation();let a=A(n.key);if(a>=0&&!r[a]){let _=new Float32Array([.01,.4]);k(h[a],t.ctx.currentTime,_,.1),r[a]=!0}console.log(n.key.toString())},T=n=>{n.stopPropagation();let a=A(n.key);a>=0&&r[a]&&(o(h[a],t.ctx.currentTime,.8),r[a]=!1),console.log(n.key.toString())},x=n=>{n.preventDefault(),n.currentTarget.checked?(document.addEventListener("keypress",c),document.addEventListener("keyup",T)):(document.removeEventListener("keypress",c),document.removeEventListener("keyup",T))};ie();var w=P(e,!0,ze),H=C(w),d=C(H),f=C(d),m=l(l(f,!0)),y=l(l(m,!0)),S=l(l(y,!0)),O=l(l(d,!0)),ce=l(l(H,!0)),de=C(ce),ve=l(l(de,!0));U(m,()=>[{id:"db",text:"C# Db"},{id:"eb",text:"D# Eb"}],1,(n,a,_)=>{var i=P(n,!0,Me),I=C(i),b=C(I),V=Q(C(b)),L;D(()=>{L!==(L=N(a).id)&&Y(i,"id",L),J(V,N(a).text)}),g("mousedown",i,E,!1),g("mouseup",i,v,!1),g("mouseleave",i,v,!1),g("mousedown",b,E,!1),g("mouseup",b,v,!1),g("mouseleave",b,v,!1),M(n,i)},null),U(S,()=>[{id:"gb",text:"F# Gb"},{id:"ab",text:"G# Ab"},{id:"bb",text:"A# Bb"}],1,(n,a,_)=>{var i=P(n,!0,Pe),I=C(i),b=C(I),V=Q(C(b)),L;D(()=>{L!==(L=N(a).id)&&Y(i,"id",L),J(V,N(a).text)}),g("mousedown",i,E,!1),g("mouseup",i,v,!1),g("mouseleave",i,v,!1),g("mousedown",b,E,!1),g("mouseup",b,v,!1),g("mouseleave",b,v,!1),M(n,i)},null),U(O,()=>[{id:"c",text:"C"},{id:"d",text:"D"},{id:"e",text:"E"},{id:"f",text:"F"},{id:"g",text:"G"},{id:"a",text:"A"},{id:"b",text:"B"},{id:"c2",text:"C"}],9,(n,a,_)=>{var i=P(n,!0,Re),I=C(i),b=C(I),V=Q(C(b)),L;D(()=>{L!==(L=N(a).id)&&Y(i,"id",L),J(V,N(a).text)}),g("mousedown",i,E,!1),g("mouseup",i,v,!1),g("mouseleave",i,v,!1),g("mousedown",b,E,!1),g("mouseup",b,v,!1),g("mouseleave",b,v,!1),M(n,i)},null),g("change",ve,x,!1),M(e,w),oe()}var Ge=R(`<div><!> <h3 class="pagetitle svelte-1uad18p">NOTE(  )</h3> <div class="links svelte-1uad18p"><a href="#concepts">Concepts</a> <a href="#piano">Piano note</a></div> <div class="links examples svelte-1uad18p">Examples: <a href="#note1">1</a> <a href="#note2">2</a> <a href="#note3">3</a> <a href="#note4">4</a></div> <div id="note1"><p>1.</p></div> <!> <div id="piano"><!></div> <div id="note2"><p>2.</p></div> <!> <div id="note3"><p>3.</p></div> <!> <div id="note4"><p>4.</p></div> <!> <h3>Vocabulary:</h3> <div id="concepts" class="svelte-1uad18p"><h4>Commands:</h4> <ul><li><b>note()</b> - the command we use to program melodies.</li> <li><b><a href="#note1">.slow( )</a></b> - makes the pattern go slower. <i>[ slow(2) = half the speed ]</i></li> <li><b><a href="#note1">.fast( )</a></b> - makes the pattern go faster. <i>[ fast(2) = double the speed  ]</i></li> <li><b><a href="#note3">.sound( )</a></b> - allows you to change the
      sound of the notes playing. This is the same command as last lesson, but
      it can be used in combination with <b>note( )</b>.</li></ul> <h4>Syntax:</h4> <ol class="svelte-1uad18p"><li class="svelte-1uad18p"><b><a href="#note2">~</a></b> - the rest, inserts a step in the
      pattern of silence.</li> <li class="svelte-1uad18p"><b><a href="#note4">("A4 B3 C2")</a></b> - note names and octave
      numbers</li></ol></div></div>`);function Qe(e,t){ue(t,!1);const s=Te.note,r=window.AudioContext,u=new r;ie();var p=P(e,!0,Ge),h=C(p),A=l(l(h,!0)),o=l(l(A,!0)),k=l(l(o,!0)),v=l(l(k,!0)),E=l(l(v,!0)),c=l(l(E,!0)),T=C(c),x=l(l(c,!0)),w=l(l(x,!0)),H=l(l(w,!0)),d=l(l(H,!0)),f=l(l(d,!0)),m=l(l(f,!0));Ce(h,{}),F(E,{title:"note()",get url(){return s[0]}}),Fe(T,{ctx:u}),F(w,{title:"note()",get url(){return s[1]}}),F(d,{title:"note()",get url(){return s[2]}}),F(m,{title:"note()",get url(){return s[3]},height:380}),M(e,p),oe()}export{Qe as component};
